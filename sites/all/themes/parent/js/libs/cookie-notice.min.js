/**
 * CookieNotice
 * Permet d'afficher une notice sur les cookies
 * @version 2.0 (04/01/2017)
 */
!function(e){"use strict";e.CookieNotice=function(t,i){e.extend(this.settings={},e.CookieNotice.defaults,i),this.elements={body:e("body"),notice:t,button:this.settings.button,link:this.settings.link},this.load()},e.CookieNotice.defaults={button:function(e){return e.find("button")},link:function(e){return e.find('a[target!="_blank"]')},classOpen:"is-cookieNoticeOpen",cookieName:"cookienotice-agree",cookieDuration:390,afterEventsHandler:void 0,onAgree:void 0,onDisagree:void 0},e.CookieNotice.agree=!1,e.CookieNotice.prototype={load:function(){return 0!==this.elements.notice.length&&void("true"===this.getCookie(this.settings.cookieName)?e.CookieNotice.agree=!0:this.disagree())},agree:function(){e.CookieNotice.agree=!0,this.elements.body.removeClass(this.settings.classOpen),this.setCookie(this.settings.cookieName,!0,this.settings.cookieDuration),this.removeEvents(),void 0!==this.settings.onAgree&&this.settings.onAgree.call({CookieNotice:this,body:this.elements.body})},disagree:function(){e.CookieNotice.agree=!1,this.elements.body.addClass(this.settings.classOpen),"true"===this.getCookie(this.settings.cookieName)&&this.setCookie(this.settings.cookieName,"",-1),void 0!==this.settings.onDisagree&&this.settings.onDisagree.call({CookieNotice:this,body:this.elements.body}),this.eventsHandler()},eventsHandler:function(){var e=this;e.elements.button(e.elements.notice).one("click.cookienotice.button",function(){e.agree()}),e.elements.link(e.elements.body).not(e.elements.notice.find("a")).one("click.cookienotice.link",function(){e.agree()}),void 0!==e.settings.afterEventsHandler&&e.settings.afterEventsHandler.call({CookieNotice:e,elements:e.elements})},removeEvents:function(){this.elements.button(this.elements.notice).off("click.cookienotice.button"),this.elements.link(this.elements.body).off("click.cookienotice.link")},getCookie:function(e){var t=new RegExp("(?:; )?"+e+"=([^;]*);?");return t.test(document.cookie)?decodeURIComponent(RegExp.$1):null},setCookie:function(e,t,i){var o=new Date,n=new Date;n.setTime(o.getTime()+24*i*60*60*1e3),document.cookie=e+"="+t+";expires="+n.toGMTString()+";path=/;"}},e.fn.cookieNotice=function(t){return!!navigator.cookieEnabled&&new e.CookieNotice(e(this),t)}}(jQuery);