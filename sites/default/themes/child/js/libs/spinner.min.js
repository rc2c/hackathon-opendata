!function(t){"use strict";t.Spinner=function(e,s){return this.elements={container:e},t.extend(!0,this.settings={},t.Spinner.defaults,s),this.timeout=null,this.prepareOptions()&&this.init(),this},t.Spinner.defaults={type:"overlay",spinner:!0,text:void 0,timeout:1e4,classes:{prefix:"spinner",wrapper:"{prefix}-wrapper",wrapperInner:"{prefix}-wrapperInner",text:"{prefix}-text",spinner:"l-spinner",loading:"is-loading"},beforeWrap:void 0,onShow:void 0,onHide:void 0},t.Spinner.prototype={prepareOptions:function(){var e=this;return t.each(e.settings.classes,function(t,s){"string"==typeof s&&(e.settings.classes[t]=s.replace(/{prefix}/,e.settings.classes.prefix))}),t.each(e.settings,function(t){var s=e.elements.container.attr("data-"+e.settings.classes.prefix+"-"+t);void 0!==s&&s.length&&(e.settings[t]="spinner"===t?!s:s)}),!0},setOptions:function(e){t.extend(!0,this.settings,e),this.refresh()},init:function(){return this.elements.container.hasClass(this.settings.classes.prefix)||(this.elements.container.addClass(this.settings.classes.prefix+" "+this.settings.classes.prefix+"--"+this.settings.type+" "+(this.settings.spinner===!0?this.settings.classes.spinner:"")),this.elements.wrapper=t("<"+("button"===this.settings.type?"span":"div")+">",{class:this.settings.classes.wrapper}),this.wrap()),this},destroy:function(){var e=this;return e.elements.container.removeClass(function(){var s=e.elements.container.attr("class").split(" "),n=null;if(s.length&&t.each(s,function(t,s){s.indexOf(e.settings.classes.prefix)!==-1&&(n+=" "+s)}),null!==n)return n.trim()}),0===e.elements.container.attr("class").length&&e.elements.container.removeAttr("class"),e.elements.wrapper.remove(),e},refresh:function(){return this.destroy(),this.init(),this},wrap:function(){this.elements.wrapper.empty(),this.elements.wrapperInner=t("<div>",{class:this.settings.classes.wrapperInner}),void 0!==this.settings.text&&"button"!==this.settings.type&&(this.elements.text=t("<p>",{class:this.settings.classes.text,html:this.settings.text})),void 0!==this.settings.beforeWrap&&this.settings.beforeWrap.call({Spinner:this,elements:this.elements}),this.elements.wrapper["overlay"===this.settings.type?"appendTo":"prependTo"](this.elements.container),this.elements.wrapperInner.appendTo(this.elements.wrapper),void 0!==this.elements.text&&this.elements.text.appendTo(this.elements.wrapperInner)},show:function(t){return this.elements.container.addClass(this.settings.classes.loading),"button"===this.settings.type&&null!==this.settings.text&&(this.elements.wrapper.remove(),this.elements.buttontext=this.elements.container.html(),this.elements.container.text(this.settings.text),this.wrap()),void 0!==this.settings.onShow&&this.settings.onShow.call({Spinner:this,container:this.elements.container}),void 0!==t&&t.call({Spinner:this,container:this.elements.container}),this.setTimeout(),this},hide:function(t){return clearTimeout(this.timeout),this.elements.container.removeClass(this.settings.classes.loading),"button"===this.settings.type&&null!==this.settings.text&&void 0!==this.elements.buttontext&&(this.elements.container.html(this.elements.buttontext),this.wrap()),void 0!==this.settings.onHide&&this.settings.onHide.call({Spinner:this,container:this.elements.container}),void 0!==t&&t.call({Spinner:this,container:this.elements.container}),this},setTimeout:function(){var t=this;void 0!==t.settings.timeout&&t.settings.timeout>0&&(t.timeout=setTimeout(function(){t.hide()},t.settings.timeout))}},t.fn.spinner=function(e){return new t.Spinner(t(this),e)}}(jQuery);